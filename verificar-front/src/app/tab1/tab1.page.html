<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Valida tus identificaciones</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Validar identificación</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="welcome-message">
    <h2>Hola, {{ userData.nombre }} {{ userData.apellido1 }} {{ userData.apellido2 }}</h2>
  </div>

  <form>
    <ion-item>
      <ion-input type="file" labelPlacement="floating" label="Sube el INE Frente"
        (change)="onFileChange($event, 'ineFrente')" accept="image/png, image/jpeg" />
    </ion-item>
    <ion-item>
      <ion-input labelPlacement="floating" label="Sube el INE Reverso" type="file"
        (change)="onFileChange($event, 'ineReverso')" accept="image/png, image/jpeg" />
    </ion-item>
    <div class="preview-container">
      <h3>Previsualización INE</h3>
      <div class="card-container">
        <ion-card>
          <ion-card-header>
            <ion-card-title>INE Frente</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <img *ngIf="documentPreviews.ineFrente && !isPdf(documentPreviews.ineFrente)"
              [src]="documentPreviews.ineFrente" alt="INE Frente" />
            <embed *ngIf="isPdf(documentPreviews.ineFrente)" [src]="documentPreviews.ineFrente"
              type="application/pdf" />
          </ion-card-content>
        </ion-card>
        <ion-card>
          <ion-card-header>
            <ion-card-title>INE Reverso</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <img *ngIf="documentPreviews.ineReverso && !isPdf(documentPreviews.ineReverso)"
              [src]="documentPreviews.ineReverso" alt="INE Reverso" />
            <embed *ngIf="isPdf(documentPreviews.ineReverso)" [src]="documentPreviews.ineReverso"
              type="application/pdf" />
          </ion-card-content>
        </ion-card>
      </div>
      <ion-button expand="full" (click)="uploadINE()">Subir INE</ion-button>
      <p class="response">{{ documentResponses.ineFrente || documentResponses.ineReverso | json }}</p>
    </div>

    <ion-item>
      <ion-input labelPlacement="floating" label="Sube el Comprobante de Situación Fiscal" type="file"
        (change)="onFileChange($event, 'csf')" accept="application/pdf, image/png, image/jpeg" />
    </ion-item>
    <div class="preview-container">
      <h3>Previsualización CSF</h3>
      <ion-card>
        <ion-card-header>
          <ion-card-title>Certificado de Situación Fiscal</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <img *ngIf="documentPreviews.csf && !isPdf(documentPreviews.csf)" [src]="documentPreviews.csf" alt="CSF" />
          <embed *ngIf="isPdf(documentPreviews.csf)" [src]="documentPreviews.csf" type="application/pdf" />
        </ion-card-content>
      </ion-card>
      <ion-button expand="full" (click)="uploadCSF()">Subir CSF</ion-button>
      <p class="response">{{ documentResponses.csf | json }}</p>
    </div>

    <ion-item>
      <ion-input labelPlacement="floating" label="Sube el Comprobante Bancario" type="file"
        (change)="onFileChange($event, 'bancario')" accept="application/pdf, image/png, image/jpeg" />
    </ion-item>
    <div class="preview-container">
      <h3>Previsualización Comprobante Bancario</h3>
      <ion-card>
        <ion-card-header>
          <ion-card-title>Comprobante Bancario</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <img *ngIf="documentPreviews.bancario && !isPdf(documentPreviews.bancario)" [src]="documentPreviews.bancario"
            alt="Comprobante Bancario" />
          <embed *ngIf="isPdf(documentPreviews.bancario)" [src]="documentPreviews.bancario" type="application/pdf" />
        </ion-card-content>
      </ion-card>
      <ion-button expand="full" (click)="uploadBancario()">Subir Comprobante Bancario</ion-button>
      <p class="response">{{ documentResponses.bancario | json }}</p>
    </div>
  </form>
</ion-content>

<style>
  .welcome-message {
    text-align: center;
    margin: 20px 0;
  }

  ion-item {
    margin-bottom: 16px;
  }

  .preview-container {
    margin-top: 20px;
  }

  .card-container {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  ion-card {
    flex: 1 1 calc(50% - 10px);
    margin: 5px;
  }

  ion-card img,
  ion-card embed {
    width: 100%;
    height: auto;
    max-height: 200px;
  }

  ion-button {
    margin-top: 20px;
  }

  .response {
    font-size: 12px;
    color: #666;
    margin-top: 8px;
  }
</style>